<html lang="en">
<head>


  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Earth Alert</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!--Font
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

    <link rel="stylesheet" type="text/css" href="/static/css/main.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/static/css/normalize.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/static/css/skeleton.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/static/css/animate.css" media="screen" />

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="icon" type="image/png" href="/static/img/grey-logo.png">

<!--Scripts
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>




</head>
<body>

  <!-- Primary Page Layout
–––––––––––––––––––––––––––––––––––––––––––––––––– -->

    <div class="navigation overlay">
		<div id="titlecard_wrapper">
			<img src="/static/img/grey-logo.png">
			<div id="header_text">Slide</div>
		</div>
         <div id="warning_box"></div>
    </div>




        <div id="mapContainer">
            <div id="map"></div>
            <script>
                var map;
                function initMap(){
                    map = new google.maps.Map(document.getElementById('map'), {
                        mapTypeId: 'terrain',
                        zoom: 3,
                        minZoom: 2,
                        maxZoom: 14,
                        center: {lat: 33, lng: 3}
                    });
                    map.data.setStyle({ fillColor:'red', strokeWeight: 0, fillOpacity: 0.8});
                    map.data.loadGeoJson("{{ geo_url }}");
                    <!-- 'https://pmmpublisher.pps.eosdis.nasa.gov/products/global_landslide_nowcast_30mn/export/Global/2017/118/global_landslide_nowcast_30mn.20170428.230000.geojson' -->
                }
            </script>
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDqqZYLz6Y4lJGuBatmPuHJxPt-Y75kNag&callback=initMap"></script>
        </div>
	<input id="file_input" type="file" name="name" style="display:none;" />
    <div class="footer">
			<div id="upload" onClick="toggle_display('imageUploadContainer');"><img src="/static/img/upload.png" /></div>
            <div id="report" onClick="toggle_display('editReportContainer');"><img src="/static/img/edit.png" /></div>
            <div id="info" onClick="toggle_display('infoContainer');"><img src="/static/img/info.png" /></div>
            <div id="sms" onClick="toggle_display('smsPrep');"><img src="/static/img/smsPrep.png"></div>
    </div>

    <div class="modals">
            <div id="imageUploadContainer" class="displayNone">
                <p>Upload your photos to help the community know of dangerous situations.</p>
				<input type="file" id="input_file" style="display:none;" />
                <button class="button-primary" value="Upload" id="upload" onclick="get_file();" >Upload</button>
            </div>
            <div id="editReportContainer" class="displayNone">
                <p>Give a brief description of your current situation.</p>
                <input id="description" type="text" placeholder="A brief description"></input>
                <button class="button-primary" value="Update" type="submit" onClick="report_event();">Update</button>
            </div>
            <div id="infoContainer" class="displayNone">
                <img style="max-width:100%;" src="/static/img/team_logo.png">
                <h4>About EarthAlert</h4>
                <p>At Earth Alert, we don't think you should have to use an API to view life-saving information. By enabling access to existing NASA resources, we are able to provide vital data to those who need it most. Moreover, we believe in the power of community contributions and allowing individuals to help themselves and those around them by adding on-the-ground information which can enable emergency responders to effectively respond where they are needed.
<h4>Team</h4>
We are a team of five college students from the University of Huntsville in Alabama and Case Western Reserve University in Cleveland. Our backgrounds range from mechanical engineering to art animation to computer science. We are passionate about many things including Python, web development, and hard problems in general. Despite officially meeting all together for the first time on Saturday morning of the NASA Space Apps Challenge, we bonded quickly over the 36-hour sprint to make SLIDE. As a team, we have been able to utilize our different backgrounds in order to create an application that we not only take great pride in, but that can actively improve the world by democratizing access to information.

<h4>Contact Info</h4><br>
<b>SMS Notification Number</b> 256-361-1265<br/>
<b>Email account</b> earthalertspace@gmail.com<br/>
<a href="https://goo.gl/BMV4Cn">YouTube Account</a><br/>
<a href="https://goo.gl/WIdi0F">Twitter</a><br/>
                <p></p>
            </div>
            <div id="smsPrep" class="displayNone">
                <h4>SMS Messaging Instructions:</h3>
                <h4 >Text This Number:</h4>
				<h4><span style="text-decoration:underline; color:red; width:100%;text-align:center;">(256)361-1265</span></h4>
<p>Two options are available for receiving a threat level via SMS messaging. Sending a message with content other than numbers (or no content) will return the calculated threat level for your geographic location. A message sent in the format lat, lon will return the calculated threat level for those precise coordinates. The threat level is calculated from the NASA Global Landslide Nowcast combined with socioeconomic data and user submitted reports. Threat levels are as follows:</p>
    <ul>
<li><b>0-1 Low:</b> Little or no landslide risk, no action necessary</li>
<li><b>1-2 Moderate:</b> Slight landslide risk, check again if conditions worse</li>
<li><b>1-3 Medium:</b> Considerable landslide risk, actively monitor conditions</li>
<li><b>3-4 High:</b> Elevated landslide risk, stay alert and develop an emergency plan</li>
<li><b>4+ Extreme:</b> Significant risk for imminent landslide, prepare for evacuation</li>
    </ul>
            </div>
        </div>





<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  	<script>
        function toggle_display( name ){
            var e = document.getElementById(name);
            clear_displays( e );
            if(e.className.includes('displayBlock')){
                e.classList.remove('displayBlock');
            } else {
                e.classList.add('displayBlock');
            }
        }

        function clear_displays( e ){
            var items = document.getElementsByClassName('displayNone');
            for(var i=0;i<items.length;i++){
                if(items[i]!=e){
                    items[i].className = "displayNone";
                }
            }
        }

		EVENTS={{ events|safe }};
		IMAGES={{ images|safe }};

		function init_events( events ){
            var contentString = [];
			for(var i =0; i < events.length;i++){
				var data = events[i];
				contentString.push( '<div id="content">'+
	            						'<h3 id="event_title">Landslide Report:</h3>'+
	            						'<div id="event_description">'+
	            							'<p>' + data.description + '</p>' +
											'<b>(' + data.datetime + ')</b>'+
	            						'</div>'+
	            					'</div>');

		        var infowindow = new google.maps.InfoWindow({
		        	content: contentString[i]
		        });
				var marker = new google.maps.Marker({
					position: {lat: parseFloat(data.latitude + 0.01*Math.random()), lng:parseFloat(data.longitude - 0.01*Math.random())},
					title: 'Community Report',
                    icon: '/static/img/caution.png',
					map: map
				});
				marker.addListener('click', function(){
					infowindow.open(map, marker);
				});
			}
		}

		function init_images( images ){
            var contentString = [];
			for(var i =0; i < images.length;i++){
				var image = images[i];
				contentString.push( '<div id="content">'+
	            							'<a href="' + image.path + '"><img src="' + image.path + '" target="_blank"/></a>' +
	            						'</div>'+
	            					'</div>');

		        var infowindow = new google.maps.InfoWindow({
		        	content: contentString[i]
		        });
				var marker = new google.maps.Marker({
					position: {lat: parseFloat(image.latitude + 0.01*Math.random()), lng:parseFloat(image.longitude - 0.01*Math.random())},
					title: 'User Image',
					map: map
				});
				marker.addListener('click', function(){
					infowindow.open(map, marker);
				});
			}
		}

        window.EVENTS = EVENTS;

		init_events( EVENTS );
		init_images( IMAGES );

	</script>
	<script src="static/js/earthalert.js"></script>
</body>
</html>
