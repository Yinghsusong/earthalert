<html lang="en">
<head>


  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Earth Alert</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  ––––––––––––––––––––––––––––––––––––––––––––––––––
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet"> -->

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" type="text/css" href="/static/css/main.css" media="screen" />


  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="/static/img/grey-logo.png">

</head>
<body>

  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

    <div class="navigation">
		<div id="titlecard_wrapper">
			<img src="/static/img/grey-logo.png">
			<div id="header_text">Slide</div>
		</div>
		<div id="warning_box"></div>
    </div>

	<div class="content">
		<div id="map"></div>
		<script>
			var map;
			function initMap(){
				map = new google.maps.Map(document.getElementById('map'), {
					mapTypeId: 'terrain',
                    zoom: 3,
					minZoom: 2,
					maxZoom: 12,
					center: {lat: 33, lng: 3}
				});
				map.data.setStyle({ fillColor:'red', strokeWeight: 0, fillOpacity: 0.8});
				map.data.loadGeoJson("{{ geo_url }}");
				<!-- 'https://pmmpublisher.pps.eosdis.nasa.gov/products/global_landslide_nowcast_30mn/export/Global/2017/118/global_landslide_nowcast_30mn.20170428.230000.geojson' -->
			}
		</script>
		<script async defer
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDqqZYLz6Y4lJGuBatmPuHJxPt-Y75kNag&callback=initMap">
		</script>

		<form id="fileupload"action="/upload" style="display:none;">
			<input id="file-input" type="file" name="name" style="display:none;" />
		</form>

	    <div class="footer">
			<div onclick="get_file();" ><img src="/static/img/upload.png"><span>Upload</span></div>
			<div id="report" onclick="report_event();"><img src="/static/img/edit.png"><span>Report</span></div>
	    </div>
    </div><!--Main Website Content -->





<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  	<script>
		function init_events(){
			var EVENTS={{ events|safe }};
			for(var i =0; i < EVENTS.length;i++){
				var data = EVENTS[i];
				var contentString = '<div id="content">'+
	            						'<h3 id="event_title">Landslide Report:</h3>'+
	            						'<div id="event_description">'+
	            							'<p>' + data.description + '</p>' +
											'<b>(' + data.datetime + ')</b>'+
	            						'</div>'+
	            					'</div>';

		        var infowindow = new google.maps.InfoWindow({
		        	content: contentString
		        });
				var marker = new google.maps.Marker({
					position: {lat: parseInt(data.latitude), lng:parseInt(data.longitude)},
					title: 'Landslide Report',
					map: map
				});
				marker.addListener('click', function(){
					infowindow.open(map, marker);
				});
			}
		}
	</script>
	<script src="static/js/earthalert.js"></script>
</body>
</html>
